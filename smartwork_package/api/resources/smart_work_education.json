{
  "contentType": "application/vnd.gorules.decision",
  "edges": [
    {
      "id": "ce03eebb-196a-42fa-82ab-081aac0cea1a",
      "sourceId": "1c3f48ee-78c5-4275-80ea-25b861ca3b68",
      "type": "edge",
      "targetId": "d3180204-d25b-49d3-a769-9a0280d40e00"
    },
    {
      "id": "27ec7315-339a-44db-a341-3638108ee88c",
      "sourceId": "434c48f2-3bf2-42ef-897a-e7014bb2ffd3",
      "type": "edge",
      "targetId": "1c3f48ee-78c5-4275-80ea-25b861ca3b68"
    },
    {
      "id": "d09acb09-fa28-4c57-b22c-41bce5d241a1",
      "sourceId": "d3180204-d25b-49d3-a769-9a0280d40e00",
      "type": "edge",
      "targetId": "cb6407c5-33d0-4ada-8be7-056a7ef57a9b"
    },
    {
      "id": "34cc1d20-37e7-41bc-8e39-ffa9fdbe4e26",
      "sourceId": "434c48f2-3bf2-42ef-897a-e7014bb2ffd3",
      "type": "edge",
      "targetId": "5d8c4669-48e9-48b6-9a91-5a65ce02ee13"
    },
    {
      "id": "a40d0ff0-19a6-4940-be84-2b5e9d21f2f6",
      "sourceId": "5d8c4669-48e9-48b6-9a91-5a65ce02ee13",
      "type": "edge",
      "targetId": "cb6407c5-33d0-4ada-8be7-056a7ef57a9b"
    },
    {
      "id": "4fec8c46-bf65-4057-9450-c42a3c47e97f",
      "sourceId": "21f14d70-caec-4043-a2d8-795b47c0eb6f",
      "type": "edge",
      "targetId": "87b6d6a8-7e73-4747-bf74-5de8faa84bf0"
    },
    {
      "id": "cff2f352-c078-406a-83a8-42e6e8edff68",
      "sourceId": "cb6407c5-33d0-4ada-8be7-056a7ef57a9b",
      "type": "edge",
      "targetId": "7465ef4a-16e5-4209-9392-5bc7c0d526c0"
    },
    {
      "id": "f7f877d5-df98-4a95-b884-ba76f3909a8a",
      "sourceId": "7465ef4a-16e5-4209-9392-5bc7c0d526c0",
      "type": "edge",
      "targetId": "21f14d70-caec-4043-a2d8-795b47c0eb6f"
    }
  ],
  "nodes": [
    {
      "id": "434c48f2-3bf2-42ef-897a-e7014bb2ffd3",
      "type": "inputNode",
      "position": {
        "x": 80,
        "y": 380
      },
      "name": "Request"
    },
    {
      "id": "1c3f48ee-78c5-4275-80ea-25b861ca3b68",
      "type": "functionNode",
      "position": {
        "x": 540,
        "y": 400
      },
      "name": "calc_change",
      "content": "/**\n* @param {import('gorules').Input} input\n* @param {{\n*  moment: import('dayjs')\n*  env: Record<string, any>\n* }} helpers\n*/\nconst handler = (input, { moment, env }) => {\n  console.log(input)\n  change_dict=Object.assign({}, input)\n  //change_dict[\"bt_pain_average\"]=input[\"bt_pain_average\"]\n  change_dict[\"bt_pain_average_change\"]=input[\"bt_pain_average\"]-input[\"bt_pain_average_prev\"]\n  change_dict[\"t_cpg_function_change\"]=input[\"t_cpg_function\"]-input[\"t_cpg_function_prev\"]\n  console.log(change_dict)\n  return change_dict;\n}"
    },
    {
      "id": "d3180204-d25b-49d3-a769-9a0280d40e00",
      "type": "decisionTableNode",
      "position": {
        "x": 810,
        "y": 410
      },
      "name": "rules",
      "content": {
        "hitPolicy": "collect",
        "inputs": [
          {
            "field": "input",
            "id": "5b0OCHm8kj",
            "name": "Input",
            "type": "expression"
          },
          {
            "id": "7WtweGVi3K",
            "type": "expression",
            "field": "bt_pain_average",
            "name": "bt_pain_average"
          },
          {
            "id": "yRvwIJFqgX",
            "type": "expression",
            "field": "bt_pain_average_change",
            "name": "bt_pain_average_change"
          },
          {
            "id": "GkyZQPBIne",
            "type": "expression",
            "field": "t_cpg_function",
            "name": "t_cpg_function"
          },
          {
            "id": "DyO3ssmWuh",
            "type": "expression",
            "field": "t_cpg_function_change",
            "name": "t_cpg_function_change"
          },
          {
            "id": "r905iqLxue",
            "type": "expression",
            "field": "t_tampa_fear",
            "name": "t_tampa_fear"
          },
          {
            "id": "w2v86bVpiJ",
            "type": "expression",
            "field": "bt_wai",
            "name": "bt_wai"
          },
          {
            "id": "G7hdRH1MDi",
            "type": "expression",
            "field": "t_sleep",
            "name": "t_sleep"
          },
          {
            "id": "ydbfvEPkoh",
            "type": "expression",
            "field": "bt_pseq_2item",
            "name": "BT_PSEQ_2item"
          },
          {
            "id": "lTB8ru4rtu",
            "type": "expression",
            "field": "bt_pss",
            "name": "bt_pss"
          },
          {
            "id": "CkXAxru9jN",
            "type": "expression",
            "field": "bt_phq_2item",
            "name": "BT_PHQ_2item"
          },
          {
            "id": "qlgTWjv5KB",
            "type": "expression",
            "field": "t_barriers",
            "name": "t_barriers"
          }
        ],
        "outputs": [
          {
            "field": "output",
            "id": "TT-TFvTN5P",
            "name": "Output",
            "type": "expression"
          },
          {
            "id": "-2CzY1NM_j",
            "type": "expression",
            "field": "remove_education",
            "name": "remove_education"
          },
          {
            "id": "Q4AXkJ-i6f",
            "type": "expression",
            "field": "add_education",
            "name": "add_education"
          },
          {
            "id": "gwxPcMpKWO",
            "type": "expression",
            "field": "expire_week",
            "name": "expire_week"
          },
          {
            "id": "Qjl8qQxIxT",
            "type": "expression",
            "field": "saliency",
            "name": "saliency"
          }
        ],
        "rules": [
          {
            "_id": "quvI_jRmag",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": ">=7",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "['Guideline_2', 'Guideline_3', 'Reassurance_8', 'Stay active_2', 'Stay active_3', 'Stay active_7', 'Stay active_12', 'Start exercise_1', 'Start exercise_2', 'Start exercise_3', 'Start exercise_4', 'Start exercise_5', 'Start exercise_6', 'Start exercise_7', 'Start exercise_8', 'Start exercise_9', 'Start exercise_10', 'Encouragement to SM_7', 'Encouragement to SM_8', 'Depression_1', 'Anxiety_1', 'Sleep disorders_1', 'MSK Pain_1', 'Pacing_1']",
            "Q4AXkJ-i6f": "['Cause of LBP_1', 'Cause of LBP_3', 'Cause of LBP_4', 'Cause of LBP_5', 'Imaging_1', 'Imaging_2', 'Pain rating_1', 'Reassurance_2', 'Reassurance_5', 'Accepting pain_1', 'Accepting pain_3', 'Distraction_1', 'Distraction_4', 'Distraction_5', 'Distress_1', 'FA Reassurance_2', 'FA Reassurance_3', 'FA Reassurance_4', 'FA Reassurance_5', 'FA Stay active_1', 'FA Stay active_2', 'FA Stay active_3', 'FA Stay active_4', 'FA Stay active_5', 'FA Stay active_6', 'FA Stay active_7', 'Problem solving_1', 'Problem solving_2', 'Problem solving_3', 'Problem solving_4', 'Relaxation_1', 'Relaxation_2', 'Relaxation_3', 'Relaxation_4', 'Relaxation_5']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "15"
          },
          {
            "_id": "W9WwzYm4WT",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": ">=3",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "['Guideline_2', 'Guideline_3', 'Reassurance_8', 'Stay active_2', 'Stay active_3', 'Stay active_7', 'Stay active_12', 'Start exercise_1', 'Start exercise_2', 'Start exercise_3', 'Start exercise_4', 'Start exercise_5', 'Start exercise_6', 'Start exercise_7', 'Start exercise_8', 'Start exercise_9', 'Start exercise_10', 'Encouragement to SM_7', 'Encouragement to SM_8', 'Depression_1', 'Anxiety_1', 'Sleep disorders_1', 'MSK Pain_1', 'Pacing_1']",
            "Q4AXkJ-i6f": "['Cause of LBP_1', 'Cause of LBP_3', 'Cause of LBP_4', 'Cause of LBP_5', 'Imaging_1', 'Imaging_2', 'Pain rating_1', 'Reassurance_2', 'Reassurance_5', 'Accepting pain_1', 'Accepting pain_3', 'Distraction_1', 'Distraction_4', 'Distraction_5', 'Distress_1', 'FA Reassurance_2', 'FA Reassurance_3', 'FA Reassurance_4', 'FA Reassurance_5', 'FA Stay active_1', 'FA Stay active_2', 'FA Stay active_3', 'FA Stay active_4', 'FA Stay active_5', 'FA Stay active_6', 'FA Stay active_7', 'Problem solving_1', 'Problem solving_2', 'Problem solving_3', 'Problem solving_4', 'Relaxation_1', 'Relaxation_2', 'Relaxation_3', 'Relaxation_4', 'Relaxation_5']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "15"
          },
          {
            "_id": "XqU5YEVWNG",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": ">=3 and <=6",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "['Sleep disorders_1', 'MSK pain_1']",
            "Q4AXkJ-i6f": "['Cause of LBP_1', 'Cause of LBP_3', 'Cause of LBP_4', 'Cause of LBP_5', 'Guideline LBP_1', 'Guideline LBP_2', 'Guideline LBP_3', 'Pain rating_1', 'Reassurance_4', 'Reassurance_6', 'Reassurance_7', 'Stay active_1', 'Stay active_5', 'Stay active_6', 'Stay active_9', 'Stay active_10', 'Stay active_13', 'Start exercise_3', 'Start exercise_4', 'Start exercise_6', 'Start exercise_8', 'Start exercise_9', 'Start exercise_10', 'Accepting pain_1', 'Accepting pain_2', 'Accepting pain_3', 'Distraction_3', 'Distraction_6', 'Thoughts_2', 'Thoughts_4', 'FA Reassurance_4', 'Daily activity_1', 'Daily activity_2', 'Daily activity_3', 'Daily activity_4', 'Daily activity_5', 'Me time_1', 'Me time_2', 'Problem solving_1', 'Problem solving_2', 'Problem solving_3', 'Problem solving_4', 'Relaxation_1', 'Relaxation_2', 'Relaxation_3', 'Relaxation_4', 'Relaxation_5']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "14"
          },
          {
            "_id": "2ffJNbDwDg",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": ">=5",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Guideline LBP_3', 'Reassurance_9', 'Reassurance_10', 'Stay active_1', 'Stay active_7', 'Stay active_12', 'Start exercise_5', 'Start exercise_9', 'Start exercise_10', 'Encouragement to SM_1', 'Encouragement to SM_2', 'Encouragement to SM_5', 'Encouragement to SM_7', 'Encouragement to SM_8', 'Fear-avoidance_4', 'Daily activity_1', 'Daily activity_2', 'Daily activity_3', 'Daily activity_4', 'Daily activity_5', 'Me time_1', 'Me time_2', 'FA Stay active_2', 'Goal setting_1', 'Goal setting_2', 'Goal setting_3', 'Goal setting_4', 'Goal setting_5', 'Action planning_1', 'Action planning_2', 'Action planning_3', 'Pacing_1', 'Pacing_2', 'Pacing_3', 'Pacing_4', 'Pacing_5', 'Pacing_6', 'Problem solving_2', 'Problem solving_3', 'Problem solving_4']",
            "gwxPcMpKWO": "2",
            "Qjl8qQxIxT": "13"
          },
          {
            "_id": "innaI-tBVV",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": ">=2",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Guideline LBP_3', 'Reassurance_9', 'Reassurance_10', 'Stay active_1', 'Stay active_7', 'Stay active_12', 'Start exercise_5', 'Start exercise_9', 'Start exercise_10', 'Encouragement to SM_1', 'Encouragement to SM_2', 'Encouragement to SM_5', 'Encouragement to SM_7', 'Encouragement to SM_8', 'Fear-avoidance_4', 'Daily activity_1', 'Daily activity_2', 'Daily activity_3', 'Daily activity_4', 'Daily activity_5', 'Me time_1', 'Me time_2', 'FA Stay active_2', 'Goal setting_1', 'Goal setting_2', 'Goal setting_3', 'Goal setting_4', 'Goal setting_5', 'Action planning_1', 'Action planning_2', 'Action planning_3', 'Pacing_1', 'Pacing_2', 'Pacing_3', 'Pacing_4', 'Pacing_5', 'Pacing_6', 'Problem solving_2', 'Problem solving_3', 'Problem solving_4']",
            "gwxPcMpKWO": "2",
            "Qjl8qQxIxT": "13"
          },
          {
            "_id": "MgBa1lmW3m",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": ">=5",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "['Pacing_4', 'Pacing_6']",
            "Q4AXkJ-i6f": "['Reassurance_1', 'Reassurance_3', 'Reassurance_8', 'Stay active_3', 'Stay active_4', 'Stay active_5', 'Stay active_6', 'Stay active_7', 'Stay active_8', 'Stay active_11', 'Stay active_13', 'Start exercise_1', 'Start exercise_4', 'Start exercise_6', 'Start exercise_7', 'Start exercise_8', 'Start exercise_9', 'Start exercise_10', 'Structure of back_2', 'Structure of back_3', 'Mind-body connection_4', 'Mind-body connection_7', 'Encouragement to SM_2', 'Encouragement to SM_6', 'Encouragement to SM_7', 'Attitude_5', 'Attitude_6', 'Changing negative thoughts_1', 'Fear-avoidance_1', 'Fear-avoidance_2', 'Fear-avoidance_3', 'Fear-avoidance_4', 'Fear-avoidance_5', 'Fear-avoidance_6', 'Thoughts_5', 'Goal setting_2', 'Goal setting_3', 'Pacing_1', 'Pacing_2', 'Pacing_3', 'Pacing_5', 'Relaxation_3', 'Relaxation_4']",
            "gwxPcMpKWO": "4",
            "Qjl8qQxIxT": "12"
          },
          {
            "_id": "8aHSjpn1kA",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "<8",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Work_1', 'Work_2', 'Work_3', 'Work_4', 'Work_5', 'Family and friends_3', 'Barrier family work_2']",
            "gwxPcMpKWO": "8",
            "Qjl8qQxIxT": "11"
          },
          {
            "_id": "WCnNK5azm2",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "\"Several times a week\", \"Sometimes\"",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Sleep disorders_1', 'Relaxation_1', 'Relaxation_2', 'Relaxation_4', 'Relaxation_5', 'Sleep_1', 'Sleep_2', 'Sleep_3', 'Sleep_4']",
            "gwxPcMpKWO": "4",
            "Qjl8qQxIxT": "10"
          },
          {
            "_id": "3MPyp7r7FG",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "<=8",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Reassurance_5', 'Reassurance_9', 'Stay active_1', 'Stay active_2', 'Stay active_3', 'Stay active_4', 'Stay active_5', 'Stay active_6', 'Stay active_7', 'Stay active_8', 'Stay active_9', 'Stay active_10', 'Stay active_11', 'Stay active_12', 'Stay active_13', 'Stay active_14', 'Start exercise_1', 'Start exercise_4', 'Start exercise_5', 'Start exercise_7', 'Start exercise_8', 'Start exercise_9', 'Start exercise_10', 'Mind-body connection_2', 'Mind-body connection_3', 'Mind-body connection_4', 'Mind-body connection_6', 'Mind-body connection_10', 'Encouragement to SM_1', 'Encouragement to SM_2', 'Encouragement to SM_4', 'Encouragement to SM_5', 'Encouragement to SM_6', 'Encouragement to SM_7', 'Encouragement to SM_8', 'Accepting pain_1', 'Accepting pain_2', 'Accepting pain_3', 'Attitude_1', 'Attitude_2', 'Attitude_3', 'Attitude_4', 'Attitude_5', 'Attitude_6', 'Changing negative thoughts_6', 'Changing negative thoughts_9', 'Thoughts_4', 'Me time_1', 'Me time_2', 'Goal setting_1', 'Goal setting_2', 'Goal setting_3', 'Goal setting_4', 'Goal setting_5', 'Action planning_1', 'Action planning_2', 'Action planning_3', 'Problem solving_2', 'Problem solving_3', 'Problem solving_4', 'Work_1', 'Work_4', 'Family and friends_1', 'Family and friends_2', 'Family and friends_3', 'Family and friends_4', 'Family and friends_5', 'Family and friends_6', 'Barrier support_1']",
            "gwxPcMpKWO": "2",
            "Qjl8qQxIxT": "9"
          },
          {
            "_id": "ffuCsSf6dc",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": ">=6",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Reassurance_3', 'Reassurance_4', 'Reassurance_9', 'Stay active_7', 'Stay active_9', 'Stay active_10', 'Stay active_11', 'Stay active_13', 'Mind-body connection_1', 'Mind-body connection_3', 'Mind-body connection_5', 'Mind-body connection_6', 'Mind-body connection_7', 'Mind-body connection_9', 'Mind-body connection_10', 'Encouragement to SM_1', 'Encouragement to SM_2', 'Encouragement to SM_4', 'Encouragement to SM_5', 'Encouragement to SM_6', 'Encouragement to SM_7', 'Anxious_1', 'Anxious_2', 'Anxious_3', 'Attitude_1', 'Attitude_3', 'Attitude_4', 'Attitude_5', 'Attitude_6', 'Changing negative thoughts_1', 'Changing negative thoughts_2', 'Changing negative thoughts_3', 'Changing negative thoughts_4', 'Changing negative thoughts_5', 'Changing negative thoughts_6', 'Changing negative thoughts_7', 'Changing negative thoughts_9', 'Changing negative thoughts_10', 'Distraction_6', 'Stress_1', 'Stress_2', 'Stress_3', 'Thoughts_1', 'Thoughts_3', 'Thoughts_6', 'Thoughts_7', 'Me time_1', 'Me time_2', 'Goal setting_2', 'Goal setting_4', 'Goal setting_5', 'Action planning_1', 'Action planning_2', 'Action planning_3', 'Problem solving_2', 'Problem solving_3', 'Problem solving_4', 'Relaxation_2', 'Relaxation_5', 'Family and friends_1', 'Family and friends_2', 'Family and friends_3', 'Family and friends_4', 'Family and friends_5', 'Family and friends_6']",
            "gwxPcMpKWO": "8",
            "Qjl8qQxIxT": "8"
          },
          {
            "_id": "XF3tf7SZLJ",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": ">=1",
            "qlgTWjv5KB": "",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Stay active_4', 'Stay active_10', 'Mind-body connection_3', 'Mind-body connection_5', 'Mind-body connection_6', 'Mind-body connection_7', 'Mind-body connection_9', 'Encouragement to SM_1', 'Encouragement to SM_2', 'Encouragement to SM_4', 'Encouragement to SM_5', 'Encouragement to SM_6', 'Encouragement to SM_7', 'Anxious_1', 'Anxious_2', 'Anxious_3', 'Attitude_3', 'Attitude_5', 'Changing negative thoughts_1', 'Changing negative thoughts_2', 'Changing negative thoughts_3', 'Changing negative thoughts_4', 'Changing negative thoughts_5', 'Changing negative thoughts_6', 'Changing negative thoughts_7', 'Changing negative thoughts_9', 'Changing negative thoughts_10', 'Distraction_1', 'Distraction_5', 'Distraction_6', 'Fear-avoidance_1', 'Thoughts_1', 'Thoughts_2', 'Thoughts_3', 'Depression_1', 'Anxiety_1', 'Problem solving_1', 'Problem solving_3', 'Relaxation_2', 'Relaxation_3', 'Relaxation_4', 'Relaxation_5', 'Family and friends_1', 'Family and friends_2', 'Family and friends_3', 'Family and friends_4', 'Family and friends_5', 'Family and friends_6']",
            "gwxPcMpKWO": "4",
            "Qjl8qQxIxT": "7"
          },
          {
            "_id": "1jlu0WAsY-",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "contains($,\"lack_of_time\")",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Barrier time_1', 'Barrier time_2', 'Daily activity_1', 'Daily activity_2', 'Daily activity_3', 'Daily activity_4', 'Daily activity_5', 'Goal setting_3', 'Action planning_1']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "6"
          },
          {
            "_id": "j751y3Ee-V",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "contains($,\"too_tired\")",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Barrier tiredness_1', 'Barrier tiredness_2']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "5"
          },
          {
            "_id": "6IQOghX7gl",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "contains($,\"lack_of_support\")",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Barrier support_1', 'Barrier family work_1', 'Daily activity_3', 'Daily activity_4', 'Family and friends_1', 'Family and friends_2', 'Family and friends_3', 'Family and friends_4', 'Family and friends_5', 'Family and friends_6']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "4"
          },
          {
            "_id": "3mA43wb_2u",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "contains($,\"family_work\")",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Barrier family work_1', 'Barrier family work_2', 'Work_1', 'Work_2', 'Family and friends_1', 'Family and friends_3']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "3"
          },
          {
            "_id": "MYm9SgtaHp",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "contains($,\"weather\")",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Barrier weather_1', 'Barrier weather_2']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "2"
          },
          {
            "_id": "-n1gKauBK1",
            "5b0OCHm8kj": "",
            "7WtweGVi3K": "",
            "yRvwIJFqgX": "",
            "GkyZQPBIne": "",
            "DyO3ssmWuh": "",
            "r905iqLxue": "",
            "w2v86bVpiJ": "",
            "G7hdRH1MDi": "",
            "ydbfvEPkoh": "",
            "lTB8ru4rtu": "",
            "CkXAxru9jN": "",
            "qlgTWjv5KB": "contains($,\"facilities\")",
            "TT-TFvTN5P": "",
            "-2CzY1NM_j": "",
            "Q4AXkJ-i6f": "['Barrier facilities_1', 'Barrier facilities_2', 'Barrier facilities_2']",
            "gwxPcMpKWO": "1",
            "Qjl8qQxIxT": "1"
          }
        ]
      }
    },
    {
      "id": "5d8c4669-48e9-48b6-9a91-5a65ce02ee13",
      "type": "functionNode",
      "position": {
        "x": 660,
        "y": 690
      },
      "name": "pass_info",
      "content": "/**\n* @param {import('gorules').Input} input\n* @param {{\n*  moment: import('dayjs')\n*  env: Record<string, any>\n* }} helpers\n*/\nconst handler = (input, { moment, env }) => {\n  info={}\n  info[\"used\"]=input[\"used\"]\n  info[\"canbequiz\"]=input[\"canbequiz\"]\n  info[\"thisweek\"]=input[\"thisweek\"]\n  info_array=new Array()\n  info_array.push(info)\n  return info_array;\n}"
    },
    {
      "id": "cb6407c5-33d0-4ada-8be7-056a7ef57a9b",
      "type": "functionNode",
      "position": {
        "x": 990,
        "y": 590
      },
      "name": "remove_education",
      "content": "/**\n* @param {import('gorules').Input} input\n* @param {{\n*  moment: import('dayjs')\n*  env: Record<string, any>\n* }} helpers\n*/\n\n\n\nconst handler = (input, { moment, env }) => {\n  //sets did not work for some reason, so arrays are used instead\n  info=input[input.length-1]\n  input_modified=input.slice(0,-1)\n\n  //add education\n  addEducation=new Array()\n  for (let i = 0; i < input_modified.length; i++) {\n    input_modified[i][\"add_education\"].forEach(item => addEducation.push({\"item\":item,\"expire_week\":input_modified[i][\"expire_week\"],\"saliency\":input_modified[i][\"saliency\"],\"used\": info[\"used\"].includes(item),\"canbequiz\": info[\"canbequiz\"].includes(item),\"thisweek\": info[\"thisweek\"].includes(item)}))\n  } \n\n  //remove education\n  removeEducation=new Array()\n  for (let i = 0; i < input_modified.length; i++) {\n    if (Object.keys(input_modified[i]).includes(\"remove_education\")){\n        input_modified[i][\"remove_education\"].forEach(item => removeEducation.push(item))\n    }\n  } \n  console.log(removeEducation)\n  // remove the education items that need to be removed\n  finalEducation=new Array()\n  for (let i = 0; i < addEducation.length; i++) {\n    if (!removeEducation.includes(addEducation[i][\"item\"])){\n      \n      finalEducation.push(addEducation[i])\n    }\n\n  }\n  return finalEducation;\n}"
    },
    {
      "id": "7465ef4a-16e5-4209-9392-5bc7c0d526c0",
      "type": "functionNode",
      "position": {
        "x": 1300,
        "y": 570
      },
      "name": "grouping",
      "content": "/**\n* @param {import('gorules').Input} input\n* @param {{\n*  moment: import('dayjs')\n*  env: Record<string, any>\n* }} helpers\n*/\ngroups={'Cause of LBP_1': 0, 'Cause of LBP_2': 0, 'Cause of LBP_3': 0, 'Cause of LBP_4': 0, 'Cause of LBP_5': 0, 'Cause of LBP_6': 0, 'Guideline LBP_1': 1, 'Guideline LBP_2': 1, 'Guideline LBP_3': 1, 'Imaging_1': 2, 'Imaging_2': 2, 'Pain rating_1': 3, 'Reassurance_1': 4, 'Reassurance_2': 4, 'Reassurance_3': 4, 'Reassurance_4': 4, 'Reassurance_5': 4, 'Reassurance_6': 4, 'Reassurance_7': 4, 'Reassurance_8': 4, 'Reassurance_9': 4, 'Reassurance_10': 4, 'Stay active_1': 5, 'Stay active_2': 5, 'Stay active_3': 5, 'Stay active_4': 5, 'Stay active_5': 5, 'Stay active_6': 5, 'Stay active_7': 5, 'Stay active_8': 5, 'Stay active_9': 5, 'Stay active_10': 5, 'Stay active_11': 5, 'Stay active_12': 5, 'Stay active_13': 5, 'Stay active_14': 5, 'Start exercise_1': 6, 'Start exercise_2': 6, 'Start exercise_3': 6, 'Start exercise_4': 6, 'Start exercise_5': 6, 'Start exercise_6': 6, 'Start exercise_7': 6, 'Start exercise_8': 6, 'Start exercise_9': 6, 'Start exercise_10': 6, 'Structure of back_1': 7, 'Structure of back_2': 7, 'Structure of back_3': 7, 'Structure of back_4': 7, 'Mind-body connection_1': 8, 'Mind-body connection_2': 8, 'Mind-body connection_3': 8, 'Mind-body connection_4': 8, 'Mind-body connection_5': 8, 'Mind-body connection_6': 8, 'Mind-body connection_7': 8, 'Mind-body connection_8': 8, 'Mind-body connection_9': 8, 'Mind-body connection_10': 8, 'Encouragement to SM_1': 9, 'Encouragement to SM_2': 9, 'Encouragement to SM_4': 9, 'Encouragement to SM_5': 9, 'Encouragement to SM_6': 9, 'Encouragement to SM_7': 9, 'Encouragement to SM_8': 9, 'Accepting pain_1': 10, 'Accepting pain_2': 10, 'Accepting pain_3': 10, 'Anxious_1': 11, 'Anxious_2': 11, 'Anxious_3': 11, 'Attitude_1': 12, 'Attitude_2': 12, 'Attitude_3': 12, 'Attitude_4': 12, 'Attitude_5': 12, 'Attitude_6': 12, 'Changing negative thoughts_1': 13, 'Changing negative thoughts_2': 13, 'Changing negative thoughts_3': 13, 'Changing negative thoughts_4': 13, 'Changing negative thoughts_5': 13, 'Changing negative thoughts_6': 13, 'Changing negative thoughts_7': 13, 'Changing negative thoughts_9': 13, 'Changing negative thoughts_10': 13, 'Distraction_1': 14, 'Distraction_2': 14, 'Distraction_3': 14, 'Distraction_4': 14, 'Distraction_5': 14, 'Distraction_6': 14, 'Distress_1': 15, 'Fear-avoidance_1': 16, 'Fear-avoidance_2': 16, 'Fear-avoidance_3': 16, 'Fear-avoidance_4': 16, 'Fear-avoidance_5': 16, 'Fear-avoidance_6': 16, 'Stress_1': 17, 'Stress_2': 17, 'Stress_3': 17, 'Thoughts_1': 18, 'Thoughts_2': 18, 'Thoughts_3': 18, 'Thoughts_4': 18, 'Thoughts_5': 18, 'Thoughts_6': 18, 'Thoughts_7': 18, 'Daily activity_1': 19, 'Daily activity_2': 19, 'Daily activity_3': 19, 'Daily activity_4': 19, 'Daily activity_5': 19, 'Me time_1': 20, 'Me time_2': 20, 'FA Reassurance_2': 21, 'FA Reassurance_3': 21, 'FA Reassurance_4': 21, 'FA Reassurance_5': 21, 'FA Stay active_1': 22, 'FA Stay active_2': 22, 'FA Stay active_3': 22, 'FA Stay active_4': 22, 'FA Stay active_5': 22, 'FA Stay active_6': 22, 'FA Stay active_7': 22, 'Depression_1': 23, 'Anxiety_1': 24, 'Sleep disorders_1': 25, 'MSK pain_1': 26, 'Goal setting_1': 27, 'Goal setting_2': 27, 'Goal setting_3': 27, 'Goal setting_4': 27, 'Goal setting_5': 27, 'Action planning_1': 28, 'Action planning_2': 28, 'Action planning_3': 28, 'Pacing_1': 29, 'Pacing_2': 29, 'Pacing_3': 29, 'Pacing_4': 29, 'Pacing_5': 29, 'Pacing_6': 29, 'Problem solving_1': 30, 'Problem solving_2': 30, 'Problem solving_3': 30, 'Problem solving_4': 30, 'Relaxation_1': 31, 'Relaxation_2': 31, 'Relaxation_3': 31, 'Relaxation_4': 31, 'Relaxation_5': 31, 'Sleep_1': 32, 'Sleep_2': 32, 'Sleep_3': 32, 'Sleep_4': 32, 'Work_1': 33, 'Work_2': 33, 'Work_3': 33, 'Work_4': 33, 'Work_5': 33, 'Family and friends_1': 34, 'Family and friends_2': 34, 'Family and friends_3': 34, 'Family and friends_4': 34, 'Family and friends_5': 34, 'Family and friends_6': 34, 'Barrier time_1': 35, 'Barrier time_2': 35, 'Barrier tiredness_1': 36, 'Barrier tiredness_2': 36, 'Barrier support_1': 37, 'Barrier family work_1': 38, 'Barrier family work_2': 38, 'Barrier weather_1': 39, 'Barrier weather_2': 39, 'Barrier facilities_1': 40, 'Barrier facilities_2': 40, 'Barrier facilities_3': 40}\nconst handler = (input, { moment, env }) => {\n  items_w_groups=[]\n  console.log(input)\n  for (let i = 0; i < input.length; i++) {\n    change_item=Object.assign({}, input[i])\n    change_item[\"group\"]=groups[change_item[\"item\"]]\n    items_w_groups.push(change_item)\n  } \n  return items_w_groups;\n}"
    },
    {
      "id": "21f14d70-caec-4043-a2d8-795b47c0eb6f",
      "type": "functionNode",
      "position": {
        "x": 1590,
        "y": 530
      },
      "name": "select_items",
      "content": "/**\n* @param {import('gorules').Input} input\n* @param {{\n*  moment: import('dayjs')\n*  env: Record<string, any>\n* }} helpers\n*/\nconst handler = (input, { moment, env }) => {\n  \n  // make array with each group\n  grouped = [];\n  input.forEach(function (a) {\n      this[a.group] || grouped.push(this[a.group] = []);\n      this[a.group].push(a);\n  }, Object.create(null));\n  // somewhat uncertain if this functions the same way as the previous rules, implicitly uses excluded feature\n  //in the ordering of the items\n  //avoid is already removed in previous function\n\n  function prioirity(a){\n    if(a.thisweek && !a.used){\n      return 5\n    }\n    else if(!a.thisweek && !a.used){\n      return 4\n    }\n    else if(a.thisweek && a.used && a.canbequiz){\n      return 3\n    }\n    else if(a.thisweek && a.used && !a.canbequiz){\n      return 2\n    }\n    else if(!a.thisweek && a.used && !a.canbequiz){\n      return 1\n    }\n    else{\n      console.log(\"this should not happen\")\n    }\n  }\n  for (let i = 0; i < grouped.length; i++) {\n    grouped[i].sort(\n    function(a, b) {       \n      if (prioirity(a)==prioirity(b)){\n        return a.saliency > b.saliency ? 1:-1;\n      }\n      else if (prioirity(a)> prioirity(b)){\n        return 1\n      }\n      else{\n        return -1\n      }\n    });\n    grouped[i].reverse()\n  } \n  console.log(grouped)\n  \n  return grouped.map(x => x[0]);;\n}"
    },
    {
      "id": "87b6d6a8-7e73-4747-bf74-5de8faa84bf0",
      "type": "outputNode",
      "position": {
        "x": 1950,
        "y": 560
      },
      "name": "Response"
    }
  ]
}